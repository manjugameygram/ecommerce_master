{"ast":null,"code":"import { API_URL, USER_AUTH } from \"./../../config/actionTypes\";\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\n\nvar CryptoJS = require(\"crypto-js\");\n\nexport var userLogin = function userLogin(data) {\n  return function (dispatch) {\n    dispatch({\n      type: USER_AUTH.SIGNIN_REQUEST\n    });\n    var INSTANCE = axios.create({\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    var inputJSON = JSON.stringify(data);\n    INSTANCE.post(API_URL + \"app-user/login\", inputJSON).then(function (response) {\n      if (response.data.messageId === 200) {\n        var result = {\n          data: {\n            user: response.data.user,\n            token: response.data.token\n          },\n          message: response.data.message\n        }; // Encrypt\n\n        var ciphertext = CryptoJS.AES.encrypt(JSON.stringify(result.data), 'GFYUFGTYGFTYTY64564545acvbvrttyFG@%#%#%#%#TTRR').toString(); // _tok_u = JWT Token & user details\n\n        Cookies.set('_tok_u', ciphertext, {\n          expires: 7\n        });\n        dispatch(userSignInSuccess(result));\n      } else {\n        dispatch(userSignInFail(response.data));\n      }\n    })[\"catch\"](function (error) {\n      dispatch(userSignInFail(error.message));\n    });\n  };\n};\n\nvar userSignInSuccess = function userSignInSuccess(data) {\n  return {\n    type: USER_AUTH.SIGNIN_REQUEST_SUCCESS,\n    payload: data\n  };\n};\n\nvar userSignInFail = function userSignInFail(errorMessage) {\n  return {\n    type: USER_AUTH.SIGNIN_REQUEST_FAIL,\n    payload: errorMessage\n  };\n};\n\nexport var userSignUp = function userSignUp(data) {\n  return function (dispatch) {\n    dispatch({\n      type: USER_AUTH.SIGNUP_REQUEST\n    });\n    var INSTANCE = axios.create({\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    var inputJSON = JSON.stringify(data);\n    INSTANCE.post(API_URL + \"app-user/signup\", inputJSON).then(function (response) {\n      if (response.data.messageId === 200) {\n        dispatch(userSignUpSuccess(response.data));\n      } else {\n        dispatch(userSignUpFail(response.data));\n      }\n    })[\"catch\"](function (error) {\n      dispatch(userSignUpFail(error.message));\n    });\n  };\n};\n\nvar userSignUpSuccess = function userSignUpSuccess(data) {\n  return {\n    type: USER_AUTH.SIGNUP_REQUEST_SUCCESS,\n    payload: data\n  };\n};\n\nvar userSignUpFail = function userSignUpFail(errorMessage) {\n  return {\n    type: USER_AUTH.SIGNUP_REQUEST_FAIL,\n    payload: errorMessage\n  };\n};\n\nexport var logOutUser = function logOutUser() {\n  Cookies.remove('_tok_u');\n  return function (dispatch) {\n    dispatch({\n      type: USER_AUTH.SIGNOUT_USER\n    });\n  };\n};\nexport var setInitUrl = function setInitUrl(url) {\n  return {\n    type: INIT_URL,\n    payload: url\n  };\n};\nexport var resetUserAuth = function resetUserAuth() {\n  return function (dispatch) {\n    dispatch({\n      type: USER_AUTH.RESET_AUTH\n    });\n  };\n};","map":{"version":3,"sources":["/Users/rajeshthakur/Desktop/Files/Work/GameyGram/Projects/reactecommerce/redux/actions/auth.js"],"names":["API_URL","USER_AUTH","axios","Cookies","CryptoJS","require","userLogin","data","dispatch","type","SIGNIN_REQUEST","INSTANCE","create","headers","inputJSON","JSON","stringify","post","then","response","messageId","result","user","token","message","ciphertext","AES","encrypt","toString","set","expires","userSignInSuccess","userSignInFail","error","SIGNIN_REQUEST_SUCCESS","payload","errorMessage","SIGNIN_REQUEST_FAIL","userSignUp","SIGNUP_REQUEST","userSignUpSuccess","userSignUpFail","SIGNUP_REQUEST_SUCCESS","SIGNUP_REQUEST_FAIL","logOutUser","remove","SIGNOUT_USER","setInitUrl","url","INIT_URL","resetUserAuth","RESET_AUTH"],"mappings":"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","sourcesContent":["import {\r\n  API_URL,\r\n  USER_AUTH\r\n} from \"./../../config/actionTypes\";\r\n\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\nconst CryptoJS = require(\"crypto-js\");\r\n\r\nexport const userLogin = (data) => {\r\n  return (dispatch) => {\r\n    dispatch({ type: USER_AUTH.SIGNIN_REQUEST });\r\n    const INSTANCE = axios.create({\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n\r\n    let inputJSON = JSON.stringify(data);\r\n      \r\n    INSTANCE.post(API_URL + \"app-user/login\", inputJSON)\r\n      .then(function (response) {\r\n        if(response.data.messageId === 200){\r\n          let result = {\r\n            data: {\r\n              user: response.data.user,\r\n              token: response.data.token\r\n            },\r\n            message: response.data.message\r\n          }\r\n          // Encrypt\r\n          const ciphertext = CryptoJS.AES.encrypt(JSON.stringify(result.data), 'GFYUFGTYGFTYTY64564545acvbvrttyFG@%#%#%#%#TTRR').toString();\r\n          // _tok_u = JWT Token & user details\r\n          Cookies.set('_tok_u', ciphertext, { expires: 7 });\r\n          dispatch(userSignInSuccess(result));\r\n        } else {\r\n          dispatch(userSignInFail(response.data));\r\n        }\r\n      })\r\n      .catch(function (error) {\r\n        dispatch(userSignInFail(error.message));\r\n      });\r\n  };\r\n};\r\n\r\nconst userSignInSuccess = (data) => ({\r\n  type: USER_AUTH.SIGNIN_REQUEST_SUCCESS,\r\n  payload: data\r\n});\r\n\r\nconst userSignInFail = errorMessage => ({\r\n  type: USER_AUTH.SIGNIN_REQUEST_FAIL,\r\n  payload: errorMessage\r\n});\r\n\r\nexport const userSignUp = (data) => {\r\n  return (dispatch) => {\r\n    dispatch({ type: USER_AUTH.SIGNUP_REQUEST });\r\n    const INSTANCE = axios.create({\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n\r\n    let inputJSON = JSON.stringify(data);\r\n      \r\n    INSTANCE.post(API_URL + \"app-user/signup\", inputJSON)\r\n      .then(function (response) {\r\n        if(response.data.messageId === 200){\r\n          dispatch(userSignUpSuccess(response.data));\r\n        } else {\r\n          dispatch(userSignUpFail(response.data));\r\n        }\r\n      })\r\n      .catch(function (error) {\r\n        dispatch(userSignUpFail(error.message));\r\n      });\r\n  };\r\n};\r\n\r\nconst userSignUpSuccess = (data) => ({\r\n  type: USER_AUTH.SIGNUP_REQUEST_SUCCESS,\r\n  payload: data\r\n});\r\n\r\nconst userSignUpFail = errorMessage => ({\r\n  type: USER_AUTH.SIGNUP_REQUEST_FAIL,\r\n  payload: errorMessage\r\n});\r\n\r\nexport const logOutUser = () => {\r\n  Cookies.remove('_tok_u');\r\n  return (dispatch) => {\r\n    dispatch({ type: USER_AUTH.SIGNOUT_USER});\r\n  }\r\n};\r\n\r\nexport const setInitUrl = (url) => {\r\n  return {\r\n    type: INIT_URL,\r\n    payload: url\r\n  };\r\n};\r\n\r\nexport const resetUserAuth = () => {\r\n  return (dispatch) => {\r\n    dispatch({ type: USER_AUTH.RESET_AUTH})\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}